async function getDatas(){let e=await fetch("./db.json");let{products:t}=await e.json();return t=t.map(e=>{var{id:t}=e.sys,{title:a,price:n}=e.content,{nowprice:l,oldprice:n}=n,{image:e}=e.images;return{id:t,title:a,oldprice:n,nowprice:l,image:e}}),t}function storageSaveProducts(e){localStorage.setItem("products",JSON.stringify(e))}function storageGetProducts(){return JSON.parse(localStorage.getItem("products"))}function storageSaveCart(e){localStorage.setItem("cart",JSON.stringify(e))}function storageGetCart(){return localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")):[]}const addMiniCart=()=>{let a=[];for(const n of[...document.querySelectorAll("#add-cart")])n.onclick=()=>{var e=n.dataset.id,t=storageGetCart(),e={...findProduct(e),amount:1};a=[...t,e];for(let t=0;t<a.length;t++)for(let e=t+1;e<a.length;e++)a[t].id===a[e].id&&(a.splice(e,1),a[t].amount+=1);e=[...a];storageSaveCart(e),renderMiniCart(e),setMiniCartValue(e)}},removeMiniCart=a=>{for(const n of[...document.querySelectorAll(".remove-product")])n.onclick=()=>{let t=n.dataset.id;var e=a.filter(e=>e.id!==t);renderMiniCart(e),setMiniCartValue(e),storageSaveCart(e)}},findProduct=t=>{let e=[...storageGetProducts()];return e.find(e=>e.id===t)},renderMiniCart=e=>{let t=document.querySelector(".cart__dropdown");if(t.innerHTML="",0===e.length){let e=document.createElement("h4");e.setAttribute("class","cart__dropdown-message");return e.innerText="Your cart is currently empty",void t.appendChild(e)}let a=e.map(e=>`
    <div class="cart__dropdown-inner">
        <div class="single-product__img"><img src="${e.image}" alt=""></div>
        <div class="single-product__text">
            <a class="single-product__text-name" href="#">${e.title}</a>
            <span class="single-product__text-quantiny">${e.amount}</span>
            <h4 class="single-product__text-price">$${e.nowprice}</h4>
        </div><span class="fas fa-trash-alt remove-product" data-id="${e.id}"></span>
    </div>`);var n=a.join("").concat(`
  <div class="cart__dropdown-total"> 
    <span>Total</span>
    <span class="cart-total">$0.00</span>
  </div>
  <div class="cart__dropdown-btn"> 
        <a class="view-cart" href="cart.html">view cart</a>
        <a class="check-cart" href="#">check cart</a>
  </div>
`);t.innerHTML=n,setMiniCartValue(e),removeMiniCart(e)},setMiniCartValue=e=>{let t=[...e],a=document.querySelector(".cart-count"),n=document.querySelectorAll(".cart-total"),l=0,r=0;if(0===e.length)return a.innerHTML=l,void n.forEach(e=>{e.innerHTML=`$${r.toFixed(2)}`});t.forEach(e=>{l+=+e.amount,r+=e.amount*e.nowprice}),a.innerHTML=l,n.forEach(e=>{e.innerHTML=`$${r.toFixed(2)}`})},defaultLoadingMiniCart=()=>{var e=storageGetCart();renderMiniCart(e),e.length};defaultLoadingMiniCart();const main={init:function(){this.navMenu(),this.bannerSlide(),this.carousel(),this.load()},navMenu:function(){const e=document.querySelector(".head-mobile"),t=document.querySelector(".head-nav"),a=document.querySelector(".head"),n=document.querySelectorAll(".nav-plus");let l=a.offsetHeight,r=!0;function i(){window.pageYOffset>l?a.classList.add("head--active"):a.classList.remove("head--active")}e.addEventListener("click",function(){t.classList.toggle("head-nav--active")}),window.addEventListener("scroll",i),n.forEach(n=>{n.addEventListener("click",e=>{e.preventDefault(),r=!r;let t=n.childNodes[0],a=n.parentElement.nextElementSibling;a.classList.toggle("sub-menu--active"),r?t.className="fas fa-plus":t.className="fas fa-minus"})}),i()},bannerSlide:function(){if(document.querySelector(".banner")){const l=[...document.querySelectorAll(".banner-slides__item")],r=[...document.querySelectorAll(".banner-slides__dot")];!function(){let n=setInterval(()=>{let e=0,t=document.querySelector(".banner-slides__item--active");for(e;t=t.previousElementSibling;e++);a(e)},3e3);function a(e){if(e<l.length-1){for(let e=0;e<l.length;e++)l[e].classList.remove("banner-slides__item--active"),r[e].classList.remove("banner-slides__dot--active");l[e].nextElementSibling.classList.add("banner-slides__item--active"),r[e].nextElementSibling.classList.add("banner-slides__dot--active")}else{for(let e=0;e<l.length;e++)l[e].classList.remove("banner-slides__item--active"),r[e].classList.remove("banner-slides__dot--active");l[0].classList.add("banner-slides__item--active"),r[0].classList.add("banner-slides__dot--active")}}r.forEach(a=>{a.addEventListener("click",()=>{clearInterval(n);let e=0;r.forEach(e=>{e.classList.remove("banner-slides__dot--active")}),a.classList.add("banner-slides__dot--active");let t=document.querySelector(".banner-slides__dot--active");for(e;t=t.previousElementSibling;e++);l.forEach(e=>{e.classList.remove("banner-slides__item--active")}),l[e].classList.add("banner-slides__item--active")})});let e=document.querySelector(".banner-slides__prev"),t=document.querySelector(".banner-slides__next");e.addEventListener("click",function(){let e=0,t=document.querySelector(".banner-slides__item--active");for(clearInterval(n),e;t=t.previousElementSibling;e++);a(e)}),t.addEventListener("click",function(){let e=0,t=document.querySelector(".banner-slides__item--active");for(clearInterval(n),e;t=t.previousElementSibling;e++);a(e)})}()}},carousel:function(){var e=document.querySelector(".home-detail"),t=document.querySelector(".brand"),a=document.querySelector(".blog");e?$(".home-detail__slide").owlCarousel({loop:!0,margin:20,dots:!1,nav:!0,responsive:{0:{items:1},600:{items:1},1e3:{items:1}}}):console.log("Not Section"),t?$(".brand-slide").owlCarousel({loop:!1,margin:20,dots:!1,nav:!1,responsive:{0:{items:2},600:{items:3},767:{items:4},1e3:{items:5}}}):console.log("Not Section"),a?$(".blog-slide").owlCarousel({loop:!1,margin:20,dots:!1,nav:!0,responsive:{0:{items:1},600:{items:1},767:{items:2},1e3:{items:2}}}):console.log("Not Section")},load:function(){let e=document.querySelector(".loading");window.addEventListener("load",()=>{setTimeout(()=>{e.classList.add("loading--off")},1500)})}};main.init();const plus_Minus=()=>{for(const a of document.querySelectorAll(".table-content__quantity"))a.onclick=t=>{var e=t.target.className;if(console.log(e),"quantity-dec"===e){let e=a.querySelector(".quantity-value");t=+e.value;++t,e.value=t}else if("quantity-inc"===e){let e=a.querySelector(".quantity-value"),t=+e.value;--t,t<1&&(t=0),e.value=t}}},updateCart=()=>{let e=document.querySelector("#update-cart"),t=document.querySelectorAll(".quantity-value");e.onclick=()=>{let n=storageGetCart();t.forEach(e=>{let t=e.dataset.id,a=e.value;n.forEach(e=>{e.id==t&&(e.amount=a)}),renderCart(n),storageSaveCart(n),setCartValue(n),renderMiniCart(n)})}},deleteProduct=()=>{for(const n of[...document.querySelectorAll(".button-remove")])n.onclick=()=>{let e=storageGetCart(),t=n.dataset.id;var a=e.filter(e=>e.id!=t);renderCart(a),storageSaveCart(a)}},renderCart=e=>{let t=[...e],r=document.querySelector(".table-section__content");if(r.innerHTML="",0===e.length){let e=document.createElement("div"),t=document.createElement("h2"),a=document.createElement("h3"),n=document.createElement("p"),l=document.createElement("a");return l.setAttribute("href","shop.html"),e.setAttribute("class","emptyCartMessage"),t.innerHTML="Shopping Cart",a.innerHTML="Your cart is currently empty!",n.innerHTML="Continue browsing",l.innerHTML="here",n.appendChild(l),e.appendChild(t),e.appendChild(a),e.appendChild(n),void r.appendChild(e)}let a=document.createElement("table"),n=document.createElement("tbody"),l=document.createElement("thead"),i=document.createElement("div");a.setAttribute("class","table"),l.setAttribute("class","thead"),n.setAttribute("class","tbody"),i.setAttribute("class","cart-dynamic"),r.appendChild(a),r.appendChild(i),a.appendChild(n),a.appendChild(l);let s=t.map(e=>`
      <tr>
      <td class="table-content"> 
          <a class="table-content__remove button-remove" data-id="${e.id}">;
              <span class="fas fa-plus"></span>
          </a>
      </td>
      <td class="table-content"> 
          <div class="table-content__img">
              <img src="${e.image}" alt="image-product">
          </div>
      </td>
      <td class="table-content">
          <a class="table-content__title" href="#">${e.title}</a>
      </td>
      <td class="table-content"> 
          <span class="table-content__price">$${e.nowprice}</span>
      </td>
      <td class="table-content">
        <div class="table-content__quantity">
          <input class="quantity-value" data-id="${e.id}" type="text" value="${e.amount}"><span class="quantity-dec">+</span><span class="quantity-inc">- </span>
        </div>
      </td>
      <td class="table-content"><span class="table-content__total money">$${(e.amount*e.nowprice).toFixed(2)}</span></td>
    </tr>`);e=s.join("");l.innerHTML=`
  <tr>
    <th class="table-title">remove</th>
    <th class="table-title">image</th>
    <th class="table-title">product</th>
    <th class="table-title">price</th>
    <th class="table-title">quantity</th>
    <th class="table-title">total</th>
  </tr>`,n.innerHTML=e,i.innerHTML=`
  <div class="row"> 
  <div class="col-lg-7 col-md-12 col-12">
    <div class="cart-dynamic__all">
      <div class="cart-dynamic__coupon"> 
          <a class="button button--dynamic" href="index.html">continue shopping</a>
          <a class="button button--dynamic" id="clear-cart" href="#">clear cart</a>
        <div class="coupon__text">
          <h3>Special instructions for seller</h3>
          <textarea class="coupon__text-input"></textarea>
        </div>
      </div>
      <div class="cart-dynamic__coupon-2">
          <a class="button button--dynamic" id="update-cart" href="#">update cart </a>
      </div>
    </div>
  </div>
  <div class="col-lg-5 col-md-12 col-12">
    <div class="cart-dynamic__total"> 
      <h2>cart totals</h2>
      <ul>
          <li class="sub-total ">
              <span class="sub-total__title">subtotal </span>
              <span class="total">$80.00</span>
          </li>
          <li class="sub-total">
              <span class="sub-total__title">total</span>
              <span class="total">$80.00</span>
          </li>
      </ul>
      <a class="button button--dynamic">proceed to checkout</a>
    </div>
  </div>
    </div>`,plus_Minus(),updateCart(),deleteProduct(),clearCart()},setCartValue=e=>{let t=document.querySelectorAll(".total");e=[...e];let a=0;for(const n of e)a+=+(n.amount*n.nowprice);t.forEach(e=>{e.innerHTML=`$${a.toFixed(2)}`})},clearCart=()=>{let e=document.querySelector("#clear-cart");e.onclick=()=>{storageSaveCart([]),renderCart([]),renderMiniCart([]),setMiniCartValue([])}},defaultLoadingCart=()=>{var e=storageGetCart();renderCart(e),setCartValue(e)};defaultLoadingCart();